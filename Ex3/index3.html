<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <link rel="stylesheet" href="css/app3.css">
</head>
<body>
    <div class="container">
        <div class="content">
            <div class="icon">
                üåè
            </div>
            <div class="title">
                <h1>I know your <b>Home</b></h1>
            </div>
            <div class="input-data">
                <form action="#" onsubmit="guessNational()">
                    <input type="text" id="username" placeholder="Tell me your first name">
                    <button id="btn-guess" type="submit" >Guess</button>
                    <div class="loading" id="loading-text" hidden>Loading...</div>
                </form>
            </div>
            <div class="result-box">
                <!-- <div class="box1">
                    <div class="country"><h1>KH</h1></div>
                    <div class="percent"><h1>81%</h1></div>
                    
                </div>
                <div class="box1">
                    <div class="country"><h1>LS</h1></div>
                    <div class="percent"><h1>4.3%</h1></div>
                </div>
                <div class="box1">
                    <div class="country"><h1>VN</h1></div>
                    <div class="percent"><h1>1.8%</h1></div>
                </div>
                <div class="box1">
                    <div class="country"><h1>TH</h1></div>
                    <div class="percent"><h1>1.6%</h1></div>
                </div>
                <div class="box1">
                    <div class="country"><h1>HU</h1></div>
                    <div class="percent"><h1>1.3%</h1></div>
                </div> -->
            </div>
        </div>
    </div>

    <script>
        const loadingTextEle = document.getElementById("loading-text");
        const button = document.getElementById("btn-guess");
        function guessNational(){
            loadingTextEle.hidden = false;
            document.querySelector(".result-box").hidden = true;
            var url = "https://api.nationalize.io/?name=" + `${username.value}`;
            fetch(url).then(async (res) =>{
                let data = await res.json();
                loadingTextEle.hidden = true;
                const tmp = `
                    <div class="box1">
                        <div class="country" id="c1"><h1>${data["country"][0].country_id}</h1></div>
                        <div class="percent" id="p1"><h1>${Number(data["country"][0].probability * 100).toFixed(2)}%</h1></div> 
                    </div>
                    <div class="box1">
                        <div class="country" id="c2"><h1>${data["country"][1].country_id}</h1></div>
                        <div class="percent" id="p2"><h1>${Number(data["country"][1].probability * 100).toFixed(2)}%</h1></div> 
                    </div>
                    <div class="box1">
                        <div class="country" id="c3"><h1>${data["country"][2].country_id}</h1></div>
                        <div class="percent" id="p3"><h1>${Number(data["country"][2].probability * 100).toFixed(2)}%</h1></div> 
                    </div>
                    <div class="box1">
                        <div class="country" id="c4"><h1>${data["country"][3].country_id}</h1></div>
                        <div class="percent" id="p4"><h1>${Number(data["country"][3].probability * 100).toFixed(2)}%</h1></div> 
                    </div>
                    <div class="box1">
                        <div class="country" id="c5"><h1>${data["country"][4].country_id}</h1></div>
                        <div class="percent" id="p5"><h1>${Number(data["country"][4].probability * 100).toFixed(2)}%</h1></div> 
                    </div>
                `
                document.querySelector(".result-box").innerHTML = tmp;
                document.querySelector(".result-box").hidden = false;
            })
        }
    </script>
</body>
</html>